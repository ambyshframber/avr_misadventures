LOAD m328P.def

DECIMAL

0 B, \ reserve space for RESET

: EMIT
	BEGIN
		UCSR0A 17 LDS
		1 UDRE0 << 17 ANDI
	NZ? UNTIL

	16 UDR0 STS
;

: RESET
	\ init uart to 9600 baud
	103 16 LDI
	16 UBRR0L STS
	0 16 LDI
	16 UBRR0H STS

	{ 1 RXEN0 << 1 TXEN0 << OR } 16 LDI
	16 UCSR0B STS

	CHAR a 16 LDI
	EMIT RCALL

	BEGIN AGAIN

RESET RESET!

\{ B0 BHERE @ 15 + 15 INVERT AND DUMP }
FINISH
